<link rel="import" href="/bower_components/polymer/polymer.html">
<link rel="import" href="/bower_components/app-route/app-location.html">
<link rel="import" href="/bower_components/app-route/app-route.html">

<link rel="import" href="/components/index-page/index-page.html">
<link rel="import" href="/components/create-page/create-page.html">
<link rel="import" href="/components/stream-page/stream-page.html">

<dom-module id="substream-app">
    <template>

        <style>
            :host {
                display: block;
            }

            header {
                margin: 0 48px;
                padding: 0 24px;
                line-height: 96px;
                border-bottom: 1px solid rgba(255, 255, 255, .3);
            }

            header h1 {
                display: inline;
                margin: 0;
                text-transform: uppercase;
            }

            header .username {
                float: right;
            }

            main {
                max-width: 900px;
                margin: 48px auto;
            }
        </style>

        <header>
            <h1>substream</h1>
            <span class="username">{{user.title}}</span>
        </header>

        <app-location route="{{route}}"
                      use-hash-as-path></app-location>

        <app-route route="{{route}}"
                   pattern="/"
                   active="{{indexActive}}"></app-route>

        <app-route route="{{route}}"
                   pattern="/s/:id"
                   data="{{streamData}}"
                   active="{{streamActive}}"></app-route>

        <app-route route="{{route}}"
                   pattern="/create"
                   active="{{createActive}}"></app-route>

        <main>
            <index-page route="{{route}}"
                        streams="{{streams}}"
                        active="{{indexActive}}"></index-page>

            <create-page route="{{route}}"
                         subs="[[subs]]"
                         active="{{createActive}}"></create-page>

            <stream-page route="{{route}}"
                         stream-id="{{streamData.id}}"
                         all-streams="[[streams]]"
                         active="{{streamActive}}"></stream-page>
        </main>

    </template>
    <script>
        Polymer({
            is: "substream-app",
            properties: {
                user: Object,
                subs: Array,
                streams: Array
            },

            attached: function() {
                if(!this.route.path) {
                    this.set('route.path', '/');
                }
            }
        });
    </script>
</dom-module>